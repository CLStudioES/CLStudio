---
import WorksScrollLeft from "../components/worksScrollLeft.astro";
import WorksScrollRight from "../components/worksScrollRight.astro";
---

<!--https://codepen.io/bibomato/pen/poqYzeq -->
<script>
    const stickySections = [...document.querySelectorAll(".sticky_wrap")];

    window.addEventListener("scroll", (e) => {
        for (let i = 0; i < stickySections.length; i++) {
            transform(stickySections[i]);
        }
    });

    function transform(section) {
        const offsetTop = section.parentElement.offsetTop;

        const scrollSection = section.querySelector(".horizontal_scroll");
        const percentajeScrollLabel = document.getElementById(
            "percentajeScrollLabel",
        );

        let percentage =
            ((window.scrollY - offsetTop) / window.innerHeight) * 100;

        percentage = percentage < 0 ? 0 : percentage > 300 ? 300 : percentage;
        // console.log(percentage);
        percentajeScrollLabel.textContent = `${Math.trunc(percentage / 3)
            .toString()
            .padStart(3, "0")}%`;

        scrollSection.style.transform = `translate3d(${-percentage}vw, 0, 0)`;
    }
</script>
<div class="hidden md:flex scroll_container">
    <div class="sticky_wrap">
        <div class="centered-container">
            <span class="centered-text font-semibold" id="percentajeScrollLabel"
                >%</span
            >
        </div>
        <div class="horizontal_scroll justify-around">
            <WorksScrollLeft />
            <WorksScrollRight />
        </div>
        <div class="centered-container-front flex items-center justify-center">
            <article
                id="gipfarma"
                onclick="window.open('https://github.com/CLStudioES', '_blank')"
                class="group cursor-pointer flex flex-row border border-subtitle-text rounded-lg glowRectangleLite bg-white/40 backdrop-blur-xl px-4 py-6 font-extralight text-title-text hover:scale-105 transition-transform duration-200"
            >
                <span>
                    <img
                        src="/img/icons/plus.svg"
                        class="group-hover:animate-sway transition-transform duration-200 h-12"
                    /></span
                >
            </article>
        </div>
        <style>
            .glowRectangle {
                box-shadow:
                    0 0 20px rgba(255, 255, 255, 0.4),
                    0 0 40px rgba(255, 255, 255, 0.3),
                    0 0 60px rgba(255, 255, 255, 0.2),
                    0 0 80px rgba(255, 255, 255, 0.1);
            }
            .glowRectangleLite {
                box-shadow:
                    0 0 20px rgba(255, 255, 255, 0.2),
                    0 0 40px rgba(255, 255, 255, 0.1),
                    0 0 60px rgba(255, 255, 255, 0.05),
                    0 0 80px rgba(255, 255, 255, 0.025);
            }
            * {
                width: 100%;
                scroll-behavior: smooth;
            }
            .scroll_container {
                height: 400vh;
            }
            .sticky_wrap {
                overflow: hidden;
                position: relative;
                position: sticky;
                top: 0;
                height: 100vh;
            }
            .horizontal_scroll {
                position: absolute;
                top: 0;
                height: 100%;
                width: 400vw;
                will-change: transform;
                display: flex;
                justify-content: space-between;
            }
            .centered-container {
                position: absolute;
                top: 50%;
                left: 45%;
                transform: translate(-50%, -50%);
                width: 800px;
                height: 400px;
                padding: 20px;
                /* Add other styles as needed */
            }
            .centered-container-front {
                position: absolute;
                top: 92.5%;
                left: 50%;
                transform: translate(-50%, -50%);
                width: 150px;
                height: 100px;
                padding: 20px;
                z-index: 10;
                /* Add other styles as needed */
            }
            .centered-text {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                font-size: 25rem;
                color: rgb(204, 20, 127);
                z-index: -10;
            }
        </style>
    </div>
</div>
