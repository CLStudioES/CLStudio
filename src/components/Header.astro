---
import { Image } from "astro:assets";
---

<script>
    //Checkeamos la secciÃ³n activa para modificar el color del navbar
    const sections = document.querySelectorAll("section");
    const experienciaLabel = document.getElementById("experienciaLabel");
    const skillsLabel = document.getElementById("skillsLabel");

    const observer = new IntersectionObserver(handleIntersection, {
        root: null,
        rootMargin: "0px", // No margin
        threshold: 0.1, // Varemo
    });

    sections.forEach((section) => {
        observer.observe(section);
    });

    function handleIntersection(entries) {
        const visibleSectionIds = [];
        const active = ["text-clstudio-pink", "font-bold"];
        entries.forEach((entry) => {
            if (entry.isIntersecting) {
                const sectionId = entry.target.id;
                visibleSectionIds.push(sectionId);
            }
        });
        if (visibleSectionIds[0] === "hero") {
            experienciaLabel.classList.remove(...active);
            skillsLabel.classList.remove(...active);
        } else if (visibleSectionIds[0] === "experiencia") {
            experienciaLabel.classList.add(...active);
            skillsLabel.classList.remove(...active);
        } else if (visibleSectionIds[0] === "skills") {
            experienciaLabel.classList.remove(...active);
            skillsLabel.classList.add(...active);
        }
    }
    //Fin checkeo navbar
</script>
<script type='text/javascript"'>
    //Comportamiento del scroll al clicar en opciones del navbar
    const navLinks = document.querySelectorAll("nav a");

    navLinks.forEach((link) => {
        link.addEventListener("click", (event) => {
            event.preventDefault(); // Prevent the default link behavior
            const targetId = event.target.getAttribute("href");
            const targetSection = document.querySelector(targetId);
            targetSection.scrollIntoView({
                behavior: "smooth",
                block: "start", // Align the top of the section with the top of the viewport
                inline: "nearest", // Align the section horizontally with the nearest edge of the viewport
            });
        });
    });
    //FinComportamiento del scroll al clicar en opciones del navbar
</script>
<header
    id="header"
    class="z-50 w-[90%] text-white font-light sticky top-0 backdrop-blur-lg md:backdrop-blur-md transition-all duration-200 md:px-28 mx-auto"
>
    <div
        class="mx-auto flex flex-wrap md:px-5 py-2 flex-col md:flex-row items-center"
    >
        <nav
            class="order-2 md:order-1 md:mr-auto md:flex flex-wrap items-center text-wrap justify-center hidden md:space-x-10"
        >
            <a
                href="#experiencia"
                id="experienciaLabel"
                class="scroll-link hover:font-light hover:text-clstudio-pink transition-all duration-150 cursor-pointer flex flex-row"
                ><svg
                    width="23"
                    height="23"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    class="pr-2"
                    ><path
                        d="M3 7m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z"
                    ></path><path d="M8 7v-2a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2v2"
                    ></path><path d="M12 12l0 .01"></path><path
                        d="M3 13a20 20 0 0 0 18 0"></path></svg
                >Experiencia</a
            >
            <a
                href="#skills"
                id="skillsLabel"
                class="scroll-link hover:font-light hover:text-clstudio-pink transition-all duration-150 cursor-pointer flex flex-row"
            >
                <svg
                    width="23"
                    height="23"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    class="pr-2"
                    ><path stroke="none" d="M0 0h24v24H0z" fill="none"
                    ></path><path
                        d="M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8"
                    ></path><path
                        d="M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8"
                    ></path><path d="M17.5 16a3.5 3.5 0 0 0 0 -7h-.5"
                    ></path><path d="M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0"
                    ></path><path d="M6.5 16a3.5 3.5 0 0 1 0 -7h.5"></path><path
                        d="M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10"></path></svg
                >Skills</a
            >
            <a
                href="#proyectos"
                class="scroll-link hover:font-light hover:text-clstudio-pink transition-all duration-150 cursor-pointer flex flex-row"
                ><svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="23"
                    height="23"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    class="pr-2"
                    ><path stroke="none" d="M0 0h24v24H0z" fill="none"
                    ></path><path
                        d="M10 19h-5a2 2 0 0 1 -2 -2v-11a2 2 0 0 1 2 -2h4l3 3h7a2 2 0 0 1 2 2v2.5"
                    ></path><path
                        d="M17.8 20.817l-2.172 1.138a.392 .392 0 0 1 -.568 -.41l.415 -2.411l-1.757 -1.707a.389 .389 0 0 1 .217 -.665l2.428 -.352l1.086 -2.193a.392 .392 0 0 1 .702 0l1.086 2.193l2.428 .352a.39 .39 0 0 1 .217 .665l-1.757 1.707l.414 2.41a.39 .39 0 0 1 -.567 .411l-2.172 -1.138z"
                    ></path></svg
                >Proyectos</a
            >
            <a
                href="#sobre-mi"
                class="scroll-link hover:font-light hover:text-clstudio-pink transition-all duration-150 cursor-pointer flex flex-row"
                ><svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="23"
                    height="23"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    class="pr-2"
                    ><path stroke="none" d="M0 0h24v24H0z" fill="none"
                    ></path><path d="M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0"
                    ></path><path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"
                    ></path></svg
                >Sobre mi</a
            >
            <a
                href="#contacto"
                class="scroll-link hover:font-light hover:text-clstudio-pink transition-all duration-150 cursor-pointer flex flex-row"
            >
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="23"
                    height="23"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    class="pr-2"
                    ><path stroke="none" d="M0 0h24v24H0z" fill="none"
                    ></path><path d="M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0"
                    ></path><path
                        d="M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28"
                    ></path></svg
                >Contacto</a
            >
        </nav>
        <a
            class="flex title-font font-medium items-center order-1 md:order-2 group"
        >
            <Image
                class="w-24 h-24 md:w-12 md:h-12 object-contain mx-auto"
                src="/img/CLStudio/CLStudioWhiteLite.svg"
                alt="Logo CLStudio"
                width={400}
                height={400}
                format="svg"
                loading="eager"
            />
        </a>
    </div>
</header>
<style>
    .glassmorphism {
        background-color: rgba(0, 0, 0, 0.5);
        box-shadow: 0 25px 40px rgba(255, 255, 255, 0.1);
        width: 90%;
        border-bottom-left-radius: 25px;
        border-bottom-right-radius: 25px;
    }
</style>
<script>
    const header = document.getElementById("header");
    const scrollThreshold = 25;
    window.addEventListener("scroll", function () {
        const scrollPosition =
            window.pageYOffset || document.documentElement.scrollTop;

        if (scrollPosition >= scrollThreshold) {
            header.classList.add("glassmorphism");
        } else {
            header.classList.remove("glassmorphism");
        }
    });
</script>
